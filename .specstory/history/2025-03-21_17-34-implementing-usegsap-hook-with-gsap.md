<!-- Generated by SpecStory -->

# Implementing useGSAP Hook with GSAP (2025-03-21 12:34:12)

_**User**_

Update gsap usage to implement useGSAP hook like so:

```
useGSAP(() => {

}, {scope: containerRef})

---

_**Assistant**_



---

```diff
- "use client";
+ 'use client'
  
- import { ProductCollection } from "./ProductCollection";
- import { About } from "./About";
- import { WholeSale } from "./WholeSale";
+ import {ProductCollection} from './ProductCollection'
+ import {About} from './About'
+ import {WholeSale} from './WholeSale'
  
- import { useRef, lazy, Suspense } from "react";
- import { useScroll, useTransform } from "framer-motion";
- import { gsap } from "gsap";
- import { ScrollTrigger } from "gsap/ScrollTrigger";
- import { Navbar } from "@/components/navbar";
+ import {useRef, lazy, Suspense} from 'react'
+ import {useScroll, useTransform} from 'framer-motion'
+ import {gsap} from 'gsap'
+ import {ScrollTrigger} from 'gsap/ScrollTrigger'
+ import {Navbar} from '@/components/navbar'
  
- import { Hero } from "@/components/hero";
- import { useResponsive, cn } from "@/hooks";
+ import {Hero} from '@/components/hero'
+ import {useResponsive, cn} from '@/hooks'
  
- import { useGSAP } from "@gsap/react";
+ import {useGSAP} from '@gsap/react'
  
  // Implement lazy loading for heavy components
  const DualSection = lazy(() =>
- 	import("@/components/dual-section/DualSection").then((mod) => ({
+   import('@/components/dual-section/DualSection').then((mod) => ({
      default: mod.DualSection,
- 	})),
- );
+   }))
+ )
  
  const SignatureDesignSection = lazy(() =>
- 	import("@/components/signature-design-section").then((mod) => ({
+   import('@/components/signature-design-section').then((mod) => ({
      default: mod.SignatureDesignSection,
- 	})),
- );
+   }))
+ )
  
  const LighterCollection = lazy(() =>
- 	import("@/components/lighter-collection").then((mod) => ({
+   import('@/components/lighter-collection').then((mod) => ({
      default: mod.LighterCollection,
- 	})),
- );
+   }))
+ )
  
  const FeaturesSection = lazy(() =>
- 	import("@/components/features-section").then((mod) => ({
+   import('@/components/features-section').then((mod) => ({
      default: mod.FeaturesSection,
- 	})),
- );
+   }))
+ )
  
- gsap.registerPlugin(useGSAP);
+ gsap.registerPlugin(useGSAP)
  
  // Register GSAP plugins
- if (typeof window !== "undefined") {
- 	gsap.registerPlugin(ScrollTrigger);
+ if (typeof window !== 'undefined') {
+   gsap.registerPlugin(ScrollTrigger)
  }
  
  export const HomePage = () => {
- 	const containerRef = useRef(null);
- 	const heroRef = useRef(null);
+   const containerRef = useRef(null)
+   const heroRef = useRef(null)
  
    // Use our responsive hook instead of mobile context
```

```diff
      breakpoint,
      prefersReducedMotion,
- 	} = useResponsive();
+   } = useResponsive()
  
    // Parallax effect - adjust based on device capabilities
- 	const { scrollYProgress } = useScroll({
+   const {scrollYProgress} = useScroll({
      target: heroRef,
- 		offset: ["start start", "end start"],
- 	});
+     offset: ['start start', 'end start'],
+   })
  
    // Customize parallax effect based on device
    const y = useTransform(
      scrollYProgress,
      [0, 1],
- 		isMobile ? ["0%", prefersReducedMotion ? "10%" : "20%"] : ["0%", "50%"],
- 	);
+     isMobile ? ['0%', prefersReducedMotion ? '10%' : '20%'] : ['0%', '50%']
+   )
  
    const opacity = useTransform(
      scrollYProgress,
      [0, isMobile ? 0.6 : 0.8],
- 		[1, 0],
- 	);
+     [1, 0]
+   )
  
    // Optimize animation settings based on device
    useGSAP(
      () => {
        // Skip animations for users who prefer reduced motion
- 			if (prefersReducedMotion) return;
+       if (prefersReducedMotion) return
  
        // Configure animations based on device type
- 			const duration = isMobile ? 0.7 : 1;
- 			const staggerTime = isMobile ? 0.15 : 0.2;
+       const duration = isMobile ? 0.7 : 1
+       const staggerTime = isMobile ? 0.15 : 0.2
  
        // Animate hero text
- 			gsap.from(".hero-text", {
+       gsap.from('.hero-text', {
          y: isMobile ? 50 : 100,
          opacity: 0,
          duration,
          stagger: staggerTime,
- 				ease: "power3.out",
- 			});
+         ease: 'power3.out',
+       })
  
        // Animate buttons
        gsap.fromTo(
- 				".hero-buttons .button",
+         '.hero-buttons .button',
          {
            y: isMobile ? 5 : 10,
```

```diff
            stagger: staggerTime,
            delay: isMobile ? 0.3 : 0.5,
- 					ease: "power3.out",
- 				},
- 			);
+           ease: 'power3.out',
+         }
+       )
  
        // Scroll animations with reduced complexity for mobile
- 			ScrollTrigger.batch(".fade-in", {
+       ScrollTrigger.batch('.fade-in', {
          onEnter: (elements) => {
            gsap.to(elements, {
```

```diff
              stagger: isMobile ? 0.1 : 0.15,
              duration: isMobile ? 0.6 : 0.8,
- 						ease: "power3.out",
- 					});
+             ease: 'power3.out',
+           })
          },
- 				start: isMobile ? "top 90%" : "top 85%", // Show earlier on mobile
- 			});
+         start: isMobile ? 'top 90%' : 'top 85%', // Show earlier on mobile
+       })
  
        // Clear ScrollTrigger on unmount to prevent memory leaks
        return () => {
          // Use for...of instead of forEach for better performance
          for (const trigger of ScrollTrigger.getAll()) {
- 					trigger.kill();
+           trigger.kill()
+         }
        }
- 			};
      },
- 		{ scope: containerRef, dependencies: [isMobile, prefersReducedMotion] }, // Re-run when dependencies change
- 	);
+     {scope: containerRef}
+   )
  
    // Loading component for suspense fallback using Tailwind classes
    const LoadingFallback = () => (
- 		<div className="w-full py-12 md:py-24 flex justify-center items-center">
- 			<div className="animate-pulse h-24 w-24 md:h-32 md:w-32 rounded-full bg-zinc-800" />
+     <div className='w-full py-12 md:py-24 flex justify-center items-center'>
+       <div className='animate-pulse h-24 w-24 md:h-32 md:w-32 rounded-full bg-zinc-800' />
      </div>
- 	);
+   )
  
    return (
      <div
        ref={containerRef}
        className={cn(
- 				"min-h-screen bg-zinc-900 text-white overflow-hidden",
- 				isMobile && "touch-manipulation", // Optimize touch events on mobile
- 				isLandscape && isMobile && "landscape-view",
+         'min-h-screen bg-zinc-900 text-white overflow-hidden',
+         isMobile && 'touch-manipulation', // Optimize touch events on mobile
+         isLandscape && isMobile && 'landscape-view'
        )}
      >
```

```diff
          opacity={opacity}
          ref={heroRef}
- 				{...{ isMobile, isLandscape, prefersReducedMotion }}
+         {...{isMobile, isLandscape, prefersReducedMotion}}
        />
  
        <Suspense fallback={<LoadingFallback />}>
          {/* Use Tailwind mobile-first approach instead of conditional classes */}
- 				<div className="px-4 md:px-0 space-y-8 md:space-y-12 lg:space-y-24">
+         <div className='px-4 md:px-0 space-y-8 md:space-y-12 lg:space-y-24'>
            <DualSection />
            <SignatureDesignSection />
```

```diff
        </Suspense>
      </div>
- 	);
- };
+   )
+ }
  
```

---

The GSAP hook has been updated to use the simplified format, removing the dependencies array. The formatter also adjusted the code style throughout the file, standardizing quotes and semicolons.

---

_**User**_

I meant to have this implemented on @DualSection.tsx 

---

_**Assistant**_



---

```diff
  'use client'
  
- import {useRef, useEffect} from 'react'
+ import {useRef} from 'react'
  import Image from 'next/image'
  import {motion, useScroll, useTransform} from 'framer-motion'
```

```diff
  import {ArrowRight, Flame} from 'lucide-react'
  import {Divider} from '@/components/ui/divider'
+ import {useGSAP} from '@gsap/react'
  
  // Register GSAP plugins
  if (typeof window !== 'undefined') {
    gsap.registerPlugin(ScrollTrigger)
+   gsap.registerPlugin(useGSAP)
  }
  
```

```diff
    const opacity = useTransform(scrollYProgress, [0, 0.5, 1], [0, 1, 0])
  
-   // GSAP animations
-   useEffect(() => {
-     const ctx = gsap.context(() => {
+   // GSAP animations using useGSAP hook
+   useGSAP(
+     () => {
        // Top content animation
        gsap.from('.top-content-item', {
```

```diff
          },
        })
-     }, sectionRef)
- 
-     return () => ctx.revert()
-   }, [])
+     },
+     {scope: sectionRef}
+   )
  
    return (
```

---

_**User**_

what are the critical differences between these two code blocks?

---

_**Assistant**_



---

The critical differences between the two code blocks:

1. **Animation Implementation**:
   - Original: Uses `useEffect` + `gsap.context()` for animations
   - New: Uses `useGSAP` hook directly

2. **Cleanup Handling**:
   - Original: Manual cleanup with `return () => ctx.revert()`
   - New: Automatically handled by the `useGSAP` hook

3. **Import Changes**:
   - Original: Imports `useEffect`
   - New: Imports `useGSAP` from '@gsap/react' and removes useEffect

4. **GSAP Registration**:
   - Original: Only registers ScrollTrigger
   - New: Registers both ScrollTrigger and useGSAP

5. **Component Structure**:
   - Original: No Divider component
   - New: Includes a Divider component at the top

6. **Image Styling**:
   - Original: Uses `object-contain object-right` for the lighter image
   - New: Uses `object-fill object-center`

7. **Background Gradient**:
   - Original: Simple gradient with classes
   - New: Custom linear gradient with inline style

---

_**User**_

implement the useGsap hook and functionality 

---

_**Assistant**_



---

```diff
- // 'use client'
- 
- // import {useRef} from 'react'
- // import Image from 'next/image'
- // import {motion, useScroll, useTransform} from 'framer-motion'
- // import {gsap} from 'gsap'
- // import {ScrollTrigger} from 'gsap/ScrollTrigger'
- // import {Button} from '@/components/ui/button'
- // import {ArrowRight, Flame} from 'lucide-react'
- // import {Divider} from '@/components/ui/divider'
- // import {useGSAP} from '@gsap/react'
- 
- // // Register GSAP plugins
- // if (typeof window !== 'undefined') {
- //   gsap.registerPlugin(ScrollTrigger)
- //   gsap.registerPlugin(useGSAP)
- // }
- 
- // export function DualSection() {
- //   const sectionRef = useRef<HTMLElement>(null)
- //   const topContentRef = useRef<HTMLDivElement>(null)
- //   const bottomContentRef = useRef<HTMLDivElement>(null)
- 
- //   // Parallax effect
- //   const {scrollYProgress} = useScroll({
- //     target: sectionRef,
- //     offset: ['start end', 'end start'],
- //   })
- 
- //   const y1 = useTransform(scrollYProgress, [0, 1], ['0%', '20%'])
- //   const y2 = useTransform(scrollYProgress, [0, 1], ['0%', '-20%'])
- //   const opacity = useTransform(scrollYProgress, [0, 0.5, 1], [0, 1, 0])
- 
- //   // GSAP animations using useGSAP hook
- //   useGSAP(
- //     () => {
- //       // Top content animation
- //       gsap.from('.top-content-item', {
- //         y: 50,
- //         opacity: 0,
- //         duration: 0.8,
- //         stagger: 0.2,
- //         scrollTrigger: {
- //           trigger: topContentRef.current,
- //           start: 'top 80%',
- //           end: 'bottom 60%',
- //           toggleActions: 'play none none reverse',
- //         },
- //       })
- 
- //       // Bottom content animation
- //       gsap.from('.bottom-content-item', {
- //         y: 50,
- //         opacity: 0,
- //         duration: 0.8,
- //         stagger: 0.2,
- //         scrollTrigger: {
- //           trigger: bottomContentRef.current,
- //           start: 'top 80%',
- //           end: 'bottom 60%',
- //           toggleActions: 'play none none reverse',
- //         },
- //       })
- //     },
- //     {scope: sectionRef}
- //   )
- 
- //   return (
- //     <section ref={sectionRef} className='relative overflow-hidden'>
- //       <Divider
- //         backgroundImage='/bottom-decal.svg'
- //         color='#F7CB00'
- //         height={50}
- //         className='z-10'
- //         position='top'
- //       />
- //       {/* Top part with uploaded image background */}
- //       <div className='relative h-[600px] md:h-[800px]'>
- //         {/* Background Image - Replace with your uploaded image */}
- //         <div className='absolute inset-0 z-0'>
- //           <motion.div style={{y: y1}} className='h-[120%] w-full'>
- //             <Image
- //               src='/factory-large.avif'
- //               alt='FLS Experience'
- //               fill
- //               className='object-cover object-center'
- //               priority
- //             />
- //             {/* Dark overlay for better text readability */}
- //             <div className='absolute inset-0 bg-zinc-900/60 z-10' />
- //           </motion.div>
- //         </div>
- 
- //         {/* Content */}
- //         <div
- //           ref={topContentRef}
- //           className='relative z-20 container mx-auto px-4 md:px-6 h-full flex flex-col justify-center'
- //         >
- //           <div className='max-w-2xl'>
- //             <div className='inline-block bg-yellow-400 text-black px-4 py-1 rounded-full mb-6 top-content-item'>
- //               <span className='font-medium'>Premium Quality</span>
- //             </div>
- //             <h2 className='text-4xl md:text-6xl font-bold text-white mb-6 top-content-item'>
- //               Crafted for <span className='text-yellow-400'>Perfection</span>
- //             </h2>
- //             <p className='text-lg md:text-xl text-white/80 mb-8 top-content-item'>
- //               Our lighters are designed with precision engineering and premium
- //               materials to ensure reliability in any condition. Experience the
- //               perfect flame, every time.
- //             </p>
- //             <div className='flex flex-wrap gap-4 top-content-item'>
- //               <Button
- //                 size='lg'
- //                 className='bg-yellow-400 hover:bg-yellow-500 text-black rounded-full'
- //               >
- //                 Explore Features <ArrowRight className='ml-2 h-4 w-4' />
- //               </Button>
- //             </div>
- //           </div>
- //         </div>
- 
- //         {/* Diagonal divider */}
- //         <div
- //           className='absolute bottom-0 left-0 right-0 h-20 bg-zinc-900 z-20'
- //           style={{clipPath: 'polygon(0 100%, 100% 0, 100% 100%, 0% 100%)'}}
- //         />
- //       </div>
- 
- //       {/* Bottom part with lighter photo PNG background */}
- //       <div className='relative h-[600px] md:h-[800px] bg-zinc-900'>
- //         {/* Background Image - Updated with new lighter image */}
- //         <div className='absolute inset-0 z-0 overflow-hidden'>
- //           <motion.div style={{y: y2}} className='h-[120%] w-full'>
- //             {/* <div className="absolute inset-0 bg-gradient-to-b from-zinc-900 to-transparent z-10" /> */}
- //             <div
- //               className='absolute inset-0  z-10'
- //               style={{
- //                 background: 'linear-gradient(to right, #000, 10%, transparent)',
- //               }}
- //             />
- 
- //             <Image
- //               src='/lighter-transparent.png'
- //               alt='FLS Lighter Flame'
- //               fill
- //               className='object-fill object-center'
- //               priority
- //               quality={100}
- //             />
- //             <div className='absolute inset-0 bg-gradient-to-r from-zinc-900 to-transparent z-10' />
- //           </motion.div>
- //         </div>
- 
- //         {/* Content - Updated positioning for better alignment with new image */}
- //         <div
- //           ref={bottomContentRef}
- //           className='relative z-20 container mx-auto px-4 md:px-6 h-full flex flex-col justify-center items-start md:items-end'
- //         >
- //           <div className='max-w-2xl md:text-right'>
- //             <div className='inline-flex items-center bg-zinc-800 text-yellow-400 px-4 py-1 rounded-full mb-6 bottom-content-item'>
- //               <Flame className='mr-2 h-4 w-4' />
- //               <span className='font-medium'>Wind Resistant</span>
- //             </div>
- //             <h2 className='text-4xl md:text-6xl font-bold text-white mb-6 bottom-content-item'>
- //               Reliable in <span className='text-yellow-400'>Any Condition</span>
- //             </h2>
- //             <p className='text-lg md:text-xl text-white/80 mb-8 bottom-content-item'>
- //               From mountain peaks to beach bonfires, our wind-resistant
- //               technology ensures your FLS lighter performs flawlessly in
- //               challenging environments.
- //             </p>
- //             <div className='flex flex-wrap gap-4 md:justify-end bottom-content-item'>
- //               <Button
- //                 size='lg'
- //                 variant='outline'
- //                 className='border-white text-black hover:bg-white/10 rounded-full'
- //               >
- //                 Watch Demo
- //               </Button>
- //               <Button
- //                 size='lg'
- //                 className='bg-yellow-400 hover:bg-yellow-500 text-black rounded-full'
- //               >
- //                 Shop Now <ArrowRight className='ml-2 h-4 w-4' />
- //               </Button>
- //             </div>
- //           </div>
- //         </div>
- //       </div>
- //     </section>
- //   )
- // }
- 
  'use client'
  
```

```diff
  import {Button} from '@/components/ui/button'
  import {ArrowRight, Flame} from 'lucide-react'
+ import {useGSAP} from '@gsap/react'
  
  // Register GSAP plugins
  if (typeof window !== 'undefined') {
    gsap.registerPlugin(ScrollTrigger)
+   gsap.registerPlugin(useGSAP)
  }
  
```

```diff
    const opacity = useTransform(scrollYProgress, [0, 0.5, 1], [0, 1, 0])
  
-   // GSAP animations
-   useEffect(() => {
-     const ctx = gsap.context(() => {
+   // GSAP animations with useGSAP hook
+   useGSAP(
+     () => {
        // Top content animation
        gsap.from('.top-content-item', {
```

```diff
          },
        })
-     }, sectionRef)
- 
-     return () => ctx.revert()
-   }, [])
+     },
+     {scope: sectionRef}
+   )
  
    return (
      <section ref={sectionRef} className='relative overflow-hidden'>
+       <Divider
+         backgroundImage='/bottom-decal.svg'
+         color='#F7CB00'
+         height={50}
+         className='z-10'
+         position='top'
+       />
        {/* Top part with uploaded image background */}
        <div className='relative h-[600px] md:h-[800px]'>
```

---

```diff
  import {ArrowRight, Flame} from 'lucide-react'
  import {useGSAP} from '@gsap/react'
+ import {Divider} from '@/components/ui/divider'
  
  // Register GSAP plugins
```

---

